"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[944],{24585:function(Ee,R,n){n.r(R),n.d(R,{default:function(){return we}});var H=n(5574),f=n.n(H),Q=n(97857),d=n.n(Q),U=n(3552),F=n(12461),V=n(26713),C=n(65360),i=n(81579),W=n(71230),b=n(15746),z=n(69677),v=n(34041),T=n(71577),X=n(68116),q=n(59652),m=n(67294),_=n(15009),u=n.n(_),ee=n(99289),p=n.n(ee),h=n(31324),te=function(){var r=p()(u()().mark(function a(s,e){return u()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",(0,h.request)("/api/flow/list",d()({method:"GET",params:d()({},s)},e||{})));case 1:case"end":return g.stop()}},a)}));return function(s,e){return r.apply(this,arguments)}}();function ae(r,a){return A.apply(this,arguments)}function A(){return A=p()(u()().mark(function r(a,s){return u()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,h.request)("/api/flow/stop",d()({method:"post",data:d()({},a)},s||{})));case 1:case"end":return l.stop()}},r)})),A.apply(this,arguments)}function re(r,a){return I.apply(this,arguments)}function I(){return I=p()(u()().mark(function r(a,s){return u()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,h.request)("/api/flow/start",d()({method:"post",data:d()({},a)},s||{})));case 1:case"end":return l.stop()}},r)})),I.apply(this,arguments)}function ne(r,a){return M.apply(this,arguments)}function M(){return M=p()(u()().mark(function r(a,s){return u()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,h.request)("/api/flow/pause",d()({method:"post",data:d()({},a)},s||{})));case 1:case"end":return l.stop()}},r)})),M.apply(this,arguments)}function se(r,a){return L.apply(this,arguments)}function L(){return L=p()(u()().mark(function r(a,s){return u()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,h.request)("/api/flow/create_new",d()({method:"post",data:a},s||{})));case 1:case"end":return l.stop()}},r)})),L.apply(this,arguments)}var le=function(){var r=p()(u()().mark(function a(){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,h.request)("/api/flow/get_inbounds",{method:"GET"}));case 1:case"end":return e.stop()}},a)}));return function(){return r.apply(this,arguments)}}(),ue=function(){var r=p()(u()().mark(function a(){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,h.request)("/api/flow/get_flow_types",{method:"GET"}));case 1:case"end":return e.stop()}},a)}));return function(){return r.apply(this,arguments)}}(),oe=function(){var r=p()(u()().mark(function a(){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,h.request)("/api/flow/get_parsers",{method:"GET"}));case 1:case"end":return e.stop()}},a)}));return function(){return r.apply(this,arguments)}}(),ie=function(){var r=p()(u()().mark(function a(){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,h.request)("/api/flow/get_key_mappers",{method:"GET"}));case 1:case"end":return e.stop()}},a)}));return function(){return r.apply(this,arguments)}}(),ce=function(){var r=p()(u()().mark(function a(){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,h.request)("/api/flow/get_formatters",{method:"GET"}));case 1:case"end":return e.stop()}},a)}));return function(){return r.apply(this,arguments)}}(),de=function(){var r=p()(u()().mark(function a(){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,h.request)("/api/flow/get_outbounds",{method:"GET"}));case 1:case"end":return e.stop()}},a)}));return function(){return r.apply(this,arguments)}}(),c={getList:te,start:re,pause:ne,stop:ae,createNew:se,getAllInbound:le,getAllFlowType:ue,getAllParserType:oe,getAllKeyMapper:ie,getAllFormatter:ce,getOutboundName:de},fe=n(19632),w=n.n(fe),me=n(85402),t=n(85893),pe=function(a){var s=(0,m.useState)(!1),e=f()(s,2),l=e[0],g=e[1],k=(0,m.useState)([]),x=f()(k,2),O=x[0],S=x[1],E=(0,m.useState)([]),N=f()(E,2),G=N[0],K=N[1],y=(0,m.useState)([]),j=f()(y,2),Z=j[0],xe=j[1],je=(0,m.useState)([]),Y=f()(je,2),Fe=Y[0],Ne=Y[1],Ze=(0,m.useState)([]),B=f()(Ze,2),be=B[0],Se=B[1],Ce=(0,m.useState)([]),D=f()(Ce,2),Te=D[0],Ae=D[1],Ie=i.Z.useForm(),Me=f()(Ie,1),J=Me[0],Le=function(){J.submit()},Pe=function(){a.closeCreateModal()};(0,m.useEffect)(function(){c.getAllFlowType().then(function(o){o.success&&Ae(o.data)}),c.getAllInbound().then(function(o){o.success&&S(o.data)}),c.getAllParserType().then(function(o){o.success&&xe(o.data)}),c.getAllKeyMapper().then(function(o){o.success&&Ne(o.data)}),c.getAllFormatter().then(function(o){o.success&&Se(o.data)}),c.getOutboundName().then(function(o){o.success&&K(o.data)})},[]);var $e=function(ke){g(!0),c.createNew(ke).then(function(Oe){Oe.success&&(F.ZP.success("operate successfully!"),a.closeCreateModal(!0)),g(!1)})};return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(me.Z,{title:"Create New Flow",visible:!0,onOk:Le,confirmLoading:l,onCancel:Pe,children:(0,t.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:(0,t.jsxs)(i.Z,{form:J,name:"advanced_search",className:"ant-advanced-search-form",layout:"vertical",onFinish:$e,labelAlign:"right",children:[(0,t.jsx)(i.Z.Item,{name:"name",label:"Name",rules:[{required:!0,message:"Missing name"}],children:(0,t.jsx)(z.Z,{style:{width:300}})}),(0,t.jsx)(i.Z.Item,{name:"transactionType",label:"Transaction",rules:[{required:!0,message:"Missing Flow Type"}],children:(0,t.jsx)(v.Z,{options:w()(Te),style:{width:300}})}),(0,t.jsx)(i.Z.Item,{name:"inboundConfigId",label:"Inbound Name",rules:[{required:!0,message:"Missing name"}],children:(0,t.jsx)(v.Z,{options:w()(O),style:{width:300}})}),(0,t.jsx)(i.Z.Item,{name:"parserType",label:"Parser Type",rules:[{required:!0,message:"Missing Parser Type"}],children:(0,t.jsx)(v.Z,{options:w()(Z),style:{width:300}})}),(0,t.jsx)(i.Z.Item,{name:"keyMapperId",label:"KeyMapper Name",rules:[{required:!0,message:"Missing KeyMapper Name"}],children:(0,t.jsx)(v.Z,{options:w()(Fe),style:{width:300}})}),(0,t.jsx)(i.Z.Item,{name:"formatterId",label:"Formatter Name",rules:[{required:!0,message:"Missing Formatter Name"}],children:(0,t.jsx)(v.Z,{options:w()(be),style:{width:300}})}),(0,t.jsx)(i.Z.Item,{name:"outboundConfigId",label:"Outbound Name",rules:[{required:!0,message:"Missing Outbound Name"}],children:(0,t.jsx)(v.Z,{options:w()(G),style:{width:300}})})]})})})})},he=pe,P=function(a,s){console.log(a),s==="start"&&c.start(d()({},a)).then(function(e){console.log(e),e.success&&F.ZP.success("start success!")}),s==="pause"&&c.pause(d()({},a)).then(function(e){console.log(e),e.success&&F.ZP.success("pause success!")}),s==="stop"&&c.stop(d()({},a)).then(function(e){console.log(e),e.success&&F.ZP.success("Request received, flow is stopping, Please check the status later !")})},$=function(a){console.log(a),F.ZP.success("Canceled")},ge=[{title:"Name",dataIndex:"name",key:"name",render:function(a){return(0,t.jsx)("a",{children:a})}},{title:"InboundName",dataIndex:"inboundName",key:"inboundName"},{title:"ParserName",dataIndex:"parserName",key:"parserName"},{title:"FilterName",dataIndex:"filterName",key:"filterName",render:function(a){return(0,t.jsx)("a",{children:"NA"})}},{title:"KeyMapperName",dataIndex:"keyMapperName",key:"keyMapperName"},{title:"FormatterName",dataIndex:"formatterName",key:"formatterName"},{title:"OutboundName",dataIndex:"outboundName",key:"outboundName"},{title:"Action",key:"action",render:function(a,s){return(0,t.jsxs)(V.Z,{size:"middle",children:[(0,t.jsx)(C.Z,{title:"Are you sure to start this flow?",onConfirm:function(){return P(s,"start")},onCancel:$,okText:"Yes",cancelText:"No",children:(0,t.jsx)("a",{href:"#",style:{fontSize:15},children:"start"})}),(0,t.jsx)(C.Z,{title:"Are you sure to start this flow?",onConfirm:function(){return P(s,"pause")},onCancel:$,okText:"Yes",cancelText:"No",children:(0,t.jsx)("a",{href:"#",style:{fontSize:15},children:"pause"})}),(0,t.jsx)(C.Z,{title:"Are you sure to start this flow?",onConfirm:function(){return P(s,"stop")},onCancel:$,okText:"Yes",cancelText:"No",children:(0,t.jsx)("a",{href:"#",style:{fontSize:15},children:"stop"})})]})}}],ve=function(){var a=i.Z.useForm(),s=f()(a,1),e=s[0],l=(0,m.useState)([]),g=f()(l,2),k=g[0],x=g[1],O=(0,m.useState)(!1),S=f()(O,2),E=S[0],N=S[1];(0,m.useEffect)(function(){c.getList().then(function(y){x(y.data)})},[]);var G=function(j){c.getList(j).then(function(Z){x(Z.data)})},K=function(j){j&&c.getList().then(function(Z){x(Z.data)}),N(!1)};return(0,t.jsxs)(U._zJ,{children:[(0,t.jsxs)(q.Z,{style:{borderRadius:8},bodyStyle:{backgroundImage:"radial-gradient(circle at 97% 10%, #EBF2FF 0%, #F5F8FF 28%, #EBF1FF 124%)"},children:[(0,t.jsx)("div",{children:(0,t.jsx)(i.Z,{form:e,name:"advanced_search",className:"ant-advanced-search-form",onFinish:G,children:(0,t.jsxs)(W.Z,{gutter:24,children:[(0,t.jsx)(b.Z,{children:(0,t.jsx)(i.Z.Item,{name:"name",label:"Name",children:(0,t.jsx)(z.Z,{})})}),(0,t.jsx)(b.Z,{children:(0,t.jsx)(i.Z.Item,{name:"status",label:"Status",children:(0,t.jsx)(v.Z,{options:[{label:"New",value:"New"},{label:"Running",value:"Running"},{label:"Stopping",value:"Stopping"},{label:"Paused",value:"Paused"},{label:"Terimation",value:"Terimation"}],style:{width:150}})})}),(0,t.jsx)(b.Z,{children:(0,t.jsx)(i.Z.Item,{name:"type",label:"Type",children:(0,t.jsx)(v.Z,{options:[{label:"Default",value:"default"},{label:"Transation",value:"Transation"}],style:{width:150}})})}),(0,t.jsxs)(b.Z,{style:{textAlign:"left"},children:[(0,t.jsx)(T.Z,{type:"primary",htmlType:"submit",children:"Search"}),(0,t.jsx)(T.Z,{style:{marginLeft:10},type:"primary",onClick:function(){e.resetFields()},children:"Clear"}),(0,t.jsx)(T.Z,{style:{marginLeft:10},type:"primary",onClick:function(){N(!0)},children:"Create New"})]})]})})}),(0,t.jsx)("div",{style:{marginTop:20},children:(0,t.jsx)(X.Z,{columns:ge,dataSource:k,pagination:!0})})]}),E&&(0,t.jsx)(he,{closeCreateModal:K})]})},ye=ve,we=ye}}]);
