"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[731],{46944:function(ce,B,n){n.r(B),n.d(B,{default:function(){return ue}});var D=n(5574),f=n.n(D),J=n(97857),c=n.n(J),z=n(3552),C=n(12461),H=n(26713),y=n(71577),R=n(65360),i=n(81579),K=n(71230),N=n(15746),h=n(69677),F=n(34041),Q=n(68116),W=n(59652),p=n(67294),Y=n(15009),m=n.n(Y),V=n(99289),x=n.n(V),j=n(31324),X=function(){var l=x()(m()().mark(function t(s,a){return m()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,j.request)("/api/inbound/list",c()({method:"GET",params:c()({},s)},a||{})));case 1:case"end":return r.stop()}},t)}));return function(s,a){return l.apply(this,arguments)}}();function k(l,t){return M.apply(this,arguments)}function M(){return M=x()(m()().mark(function l(t,s){return m()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,j.request)("/api/inbound/create_new",c()({method:"post",data:c()({},t)},s||{})));case 1:case"end":return u.stop()}},l)})),M.apply(this,arguments)}var q=function(){var l=x()(m()().mark(function t(){return m()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,j.request)("/api/inbound/get_types",{method:"GET"}));case 1:case"end":return a.stop()}},t)}));return function(){return l.apply(this,arguments)}}(),_=function(){var l=x()(m()().mark(function t(s,a){return m()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,j.request)("/api/inbound/view",c()({method:"GET",params:c()({},s)},a||{})));case 1:case"end":return r.stop()}},t)}));return function(s,a){return l.apply(this,arguments)}}(),ee=function(){var l=x()(m()().mark(function t(s,a){return m()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,j.request)("/api/inbound/disable",c()({method:"GET",params:c()({},s)},a||{})));case 1:case"end":return r.stop()}},t)}));return function(s,a){return l.apply(this,arguments)}}(),v={getList:X,view:_,disable:ee,createNew:k,getAllInboundType:q},te=n(85402),A=n(29924),e=n(85893),ne=function(t){var s=(0,p.useState)(!1),a=f()(s,2),u=a[0],r=a[1],L=(0,p.useState)([]),g=f()(L,2),P=g[0],T=g[1],E=(0,p.useState)(),b=f()(E,2),I=b[0],S=b[1],$=i.Z.useForm(),G=f()($,1),w=G[0],O=function(){w.submit()},d=function(){t.closeCreateModal()};(0,p.useEffect)(function(){v.getAllInboundType().then(function(o){o.success&&T(o.data)})},[]);var Z=function(U){r(!0),v.createNew(c()({},U)).then(function(de){de.success&&(C.ZP.success("operate successfully!"),t.closeCreateModal(!0)),r(!1)})};return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(te.Z,{title:"Create New Inbound",visible:!0,onOk:O,confirmLoading:u,onCancel:d,children:(0,e.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:(0,e.jsxs)(i.Z,{form:w,name:"advanced_search",className:"ant-advanced-search-form",layout:"vertical",onFinish:Z,labelAlign:"right",children:[(0,e.jsx)(i.Z.Item,{name:"name",label:"Name (unique)",rules:[{required:!0,message:"Missing  Name"}],children:(0,e.jsx)(h.Z,{style:{width:400}})}),(0,e.jsx)(i.Z.Item,{name:"inboundType",label:"Inbound Type",rules:[{required:!0,message:"Missing Outbound Type"}],children:(0,e.jsx)(F.Z,{options:P,style:{width:400},onChange:function(U){S(U)}})}),(0,e.jsx)(i.Z.Item,{name:"server",label:"Host Name",rules:[{required:!0,message:"Missing Host Name"}],children:(0,e.jsx)(h.Z,{style:{width:400}})}),(0,e.jsx)(i.Z.Item,{name:"port",label:"Port",rules:[{required:!0,message:"Missing Port"}],children:(0,e.jsx)(h.Z,{style:{width:400}})}),(0,e.jsx)(i.Z.Item,{name:"userName",label:"User Name",rules:[{required:!0,message:"Missing User Name"}],children:(0,e.jsx)(h.Z,{style:{width:400}})}),(0,e.jsx)(i.Z.Item,{name:"password",label:"Password",rules:[{required:!0,message:"Missing Password"}],children:(0,e.jsx)(h.Z.Password,{style:{width:400}})}),I==="JDBC"?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(i.Z.Item,{name:"jdbcType",label:"JDBC Type",rules:[{required:!0,message:"Missing JDBC Type"}],children:(0,e.jsx)(F.Z,{options:[{label:"Oracle",value:"Oracle"},{label:"Mysql",value:"Mysql"}],style:{width:400}})}),(0,e.jsx)(i.Z.Item,{name:"executeSql",label:"Execute sql (More SQL will be supported in the future)",rules:[{required:!0,message:"Missing User Name"}],children:(0,e.jsx)(h.Z.TextArea,{style:{width:400,height:150},showCount:!0,placeholder:"input other properties"})}),(0,e.jsx)(i.Z.Item,{name:"timer",label:"Execute Timer (More timers are supported in the future)",rules:[{required:!0,message:"Missing User Name"}],children:(0,e.jsxs)(A.ZP.Group,{children:[(0,e.jsx)(A.ZP,{value:"once",children:"once"}),(0,e.jsx)(A.ZP,{value:"loop",children:"loop"})]})})]}):"",I==="KAFKA"?(0,e.jsx)(i.Z.Item,{name:"topic",label:"Topic Name",rules:[{required:!0,message:"Missing Topic Name"}],children:(0,e.jsx)(h.Z,{style:{width:400}})}):"",(0,e.jsx)(i.Z.Item,{name:"properties",label:"Properties (key=value , Used to initialize inbound )",children:(0,e.jsx)(h.Z.TextArea,{style:{width:400,height:200},showCount:!0,placeholder:"input other properties"})}),(0,e.jsx)(y.Z,{type:"primary",children:"Test Connection"})]})})})})},se=ne,me=function(t){inboundApi.view(_objectSpread({},t)).then(function(s){console.log(s),s&&message.success("start success!")}),message.success("operate successfully")},ae=function(t){console.log(t),v.disable(c()({},t)).then(function(s){console.log(s),s&&C.ZP.success("operate successfully!")})},re=function(t){console.log(t),C.ZP.success("Canceled")},ie=[{title:"Name",dataIndex:"name",key:"name",render:function(t){return(0,e.jsx)("a",{children:t})}},{title:"Type",dataIndex:"inboundType"},{title:"HostName",dataIndex:"hostName"},{title:"User Name",dataIndex:"userName"},{title:"Created Time",dataIndex:"createdTime"},{title:"Action",key:"action",render:function(t,s){return(0,e.jsxs)(H.Z,{size:"middle",children:[(0,e.jsx)(y.Z,{type:"primary",onClick:function(){C.ZP.success("Wait for the implementation !")},children:"Detail"}),(0,e.jsx)(R.Z,{title:"Are you sure to start this flow?",onConfirm:function(){return ae(s)},onCancel:re,okText:"Yes",cancelText:"No",children:(0,e.jsx)(y.Z,{type:"primary",children:"disable"})})]})}}],le=function(){var t=i.Z.useForm(),s=f()(t,1),a=s[0],u=(0,p.useState)([]),r=f()(u,2),L=r[0],g=r[1],P=(0,p.useState)(!1),T=f()(P,2),E=T[0],b=T[1],I=(0,p.useState)([]),S=f()(I,2),$=S[0],G=S[1];(0,p.useEffect)(function(){v.getAllInboundType().then(function(d){d.success&&G(d.data)}),v.getList({}).then(function(d){d&&g(d.data)})},[]);var w=function(Z){v.getList(Z).then(function(o){o&&g(o.data)})},O=function(Z){Z&&v.getList({}).then(function(o){o&&g(o.data)}),b(!1)};return(0,e.jsxs)(z._zJ,{children:[(0,e.jsxs)(W.Z,{style:{borderRadius:8},bodyStyle:{backgroundImage:"radial-gradient(circle at 97% 10%, #EBF2FF 0%, #F5F8FF 28%, #EBF1FF 124%)"},children:[(0,e.jsx)("div",{children:(0,e.jsx)(i.Z,{form:a,name:"advanced_search",className:"ant-advanced-search-form",onFinish:w,children:(0,e.jsxs)(K.Z,{gutter:24,children:[(0,e.jsx)(N.Z,{children:(0,e.jsx)(i.Z.Item,{name:"name",label:"Name",children:(0,e.jsx)(h.Z,{})})}),(0,e.jsx)(N.Z,{children:(0,e.jsx)(i.Z.Item,{name:"type",label:"Type",children:(0,e.jsx)(F.Z,{options:$,style:{width:150}})})}),(0,e.jsxs)(N.Z,{style:{textAlign:"left"},children:[(0,e.jsx)(y.Z,{type:"primary",htmlType:"submit",children:"Search"}),(0,e.jsx)(y.Z,{style:{marginLeft:10},type:"primary",onClick:function(){a.resetFields()},children:"Clear"}),(0,e.jsx)(y.Z,{style:{marginLeft:10},type:"primary",onClick:function(){b(!0)},children:"Create New"})]})]})})}),(0,e.jsx)("div",{style:{marginTop:20},children:(0,e.jsx)(Q.Z,{columns:ie,dataSource:L,pagination:!0})})]}),E&&(0,e.jsx)(se,{closeCreateModal:O})]})},oe=le,ue=oe}}]);
