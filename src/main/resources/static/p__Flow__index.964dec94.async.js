"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[944],{24585:function(Ee,R,n){n.r(R),n.d(R,{default:function(){return we}});var V=n(5574),m=n.n(V),D=n(97857),d=n.n(D),H=n(3552),w=n(12461),Q=n(26713),g=n(71577),b=n(65360),i=n(81579),U=n(71230),T=n(15746),Y=n(69677),v=n(34041),X=n(68116),q=n(59652),p=n(67294),_=n(15009),u=n.n(_),ee=n(99289),f=n.n(ee),h=n(31324),te=function(){var r=f()(u()().mark(function a(s,e){return u()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.abrupt("return",(0,h.request)("/api/flow/list",d()({method:"GET",params:d()({},s)},e||{})));case 1:case"end":return y.stop()}},a)}));return function(s,e){return r.apply(this,arguments)}}();function ae(r,a){return A.apply(this,arguments)}function A(){return A=f()(u()().mark(function r(a,s){return u()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,h.request)("/api/flow/stop",d()({method:"post",data:d()({},a)},s||{})));case 1:case"end":return l.stop()}},r)})),A.apply(this,arguments)}function re(r,a){return I.apply(this,arguments)}function I(){return I=f()(u()().mark(function r(a,s){return u()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,h.request)("/api/flow/start",d()({method:"post",data:d()({},a)},s||{})));case 1:case"end":return l.stop()}},r)})),I.apply(this,arguments)}function ne(r,a){return M.apply(this,arguments)}function M(){return M=f()(u()().mark(function r(a,s){return u()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,h.request)("/api/flow/pause",d()({method:"post",data:d()({},a)},s||{})));case 1:case"end":return l.stop()}},r)})),M.apply(this,arguments)}function se(r,a){return P.apply(this,arguments)}function P(){return P=f()(u()().mark(function r(a,s){return u()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,h.request)("/api/flow/create_new",d()({method:"post",data:a},s||{})));case 1:case"end":return l.stop()}},r)})),P.apply(this,arguments)}var le=function(){var r=f()(u()().mark(function a(){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,h.request)("/api/flow/get_inbounds",{method:"GET"}));case 1:case"end":return e.stop()}},a)}));return function(){return r.apply(this,arguments)}}(),ue=function(){var r=f()(u()().mark(function a(){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,h.request)("/api/flow/get_flow_types",{method:"GET"}));case 1:case"end":return e.stop()}},a)}));return function(){return r.apply(this,arguments)}}(),oe=function(){var r=f()(u()().mark(function a(){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,h.request)("/api/flow/get_parsers",{method:"GET"}));case 1:case"end":return e.stop()}},a)}));return function(){return r.apply(this,arguments)}}(),ie=function(){var r=f()(u()().mark(function a(){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,h.request)("/api/flow/get_key_mappers",{method:"GET"}));case 1:case"end":return e.stop()}},a)}));return function(){return r.apply(this,arguments)}}(),ce=function(){var r=f()(u()().mark(function a(){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,h.request)("/api/flow/get_formatters",{method:"GET"}));case 1:case"end":return e.stop()}},a)}));return function(){return r.apply(this,arguments)}}(),de=function(){var r=f()(u()().mark(function a(){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,h.request)("/api/flow/get_outbounds",{method:"GET"}));case 1:case"end":return e.stop()}},a)}));return function(){return r.apply(this,arguments)}}(),c={getList:te,start:re,pause:ne,stop:ae,createNew:se,getAllInbound:le,getAllFlowType:ue,getAllParserType:oe,getAllKeyMapper:ie,getAllFormatter:ce,getOutboundName:de},me=n(19632),j=n.n(me),pe=n(85402),t=n(85893),fe=function(a){var s=(0,p.useState)(!1),e=m()(s,2),l=e[0],y=e[1],O=(0,p.useState)([]),Z=m()(O,2),$=Z[0],S=Z[1],E=(0,p.useState)([]),F=m()(E,2),G=F[0],K=F[1],x=(0,p.useState)([]),N=m()(x,2),C=N[0],xe=N[1],je=(0,p.useState)([]),z=m()(je,2),Ze=z[0],Ne=z[1],Fe=(0,p.useState)([]),B=m()(Fe,2),Ce=B[0],Te=B[1],Se=(0,p.useState)([]),W=m()(Se,2),be=W[0],Ae=W[1],Ie=i.Z.useForm(),Me=m()(Ie,1),J=Me[0],Pe=function(){J.submit()},ke=function(){a.closeCreateModal()};(0,p.useEffect)(function(){c.getAllFlowType().then(function(o){o.success&&Ae(o.data)}),c.getAllInbound().then(function(o){o.success&&S(o.data)}),c.getAllParserType().then(function(o){o.success&&xe(o.data)}),c.getAllKeyMapper().then(function(o){o.success&&Ne(o.data)}),c.getAllFormatter().then(function(o){o.success&&Te(o.data)}),c.getOutboundName().then(function(o){o.success&&K(o.data)})},[]);var Le=function(Oe){y(!0),c.createNew(Oe).then(function($e){$e.success&&(w.ZP.success("operate successfully!"),a.closeCreateModal(!0)),y(!1)})};return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(pe.Z,{title:"Create New Flow",visible:!0,onOk:Pe,confirmLoading:l,onCancel:ke,children:(0,t.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:(0,t.jsxs)(i.Z,{form:J,name:"advanced_search",className:"ant-advanced-search-form",layout:"vertical",onFinish:Le,labelAlign:"right",children:[(0,t.jsx)(i.Z.Item,{name:"name",label:"Name",rules:[{required:!0,message:"Missing name"}],children:(0,t.jsx)(Y.Z,{style:{width:300}})}),(0,t.jsx)(i.Z.Item,{name:"transactionType",label:"Transaction",rules:[{required:!0,message:"Missing Flow Type"}],children:(0,t.jsx)(v.Z,{options:j()(be),style:{width:300}})}),(0,t.jsx)(i.Z.Item,{name:"inboundConfigId",label:"Inbound Name",rules:[{required:!0,message:"Missing name"}],children:(0,t.jsx)(v.Z,{options:j()($),style:{width:300}})}),(0,t.jsx)(i.Z.Item,{name:"parserType",label:"Parser Type",rules:[{required:!0,message:"Missing Parser Type"}],children:(0,t.jsx)(v.Z,{options:j()(C),style:{width:300}})}),(0,t.jsx)(i.Z.Item,{name:"keyMapperId",label:"KeyMapper Name",rules:[{required:!0,message:"Missing KeyMapper Name"}],children:(0,t.jsx)(v.Z,{options:j()(Ze),style:{width:300}})}),(0,t.jsx)(i.Z.Item,{name:"formatterId",label:"Formatter Name",rules:[{required:!0,message:"Missing Formatter Name"}],children:(0,t.jsx)(v.Z,{options:j()(Ce),style:{width:300}})}),(0,t.jsx)(i.Z.Item,{name:"outboundConfigId",label:"Outbound Name",rules:[{required:!0,message:"Missing Outbound Name"}],children:(0,t.jsx)(v.Z,{options:j()(G),style:{width:300}})})]})})})})},he=fe,k=function(a,s){console.log(a),s==="start"&&c.start(d()({},a)).then(function(e){console.log(e),e.success&&w.ZP.success("start success!")}),s==="pause"&&c.pause(d()({},a)).then(function(e){console.log(e),e.success&&w.ZP.success("pause success!")}),s==="stop"&&c.stop(d()({},a)).then(function(e){console.log(e),e.success&&w.ZP.success("Request received, flow is stopping, Please check the status later !")})},L=function(a){console.log(a),w.ZP.success("Canceled")},ye=[{title:"Name",dataIndex:"name",key:"name",render:function(a){return(0,t.jsx)("a",{children:a})}},{title:"Status",dataIndex:"status",key:"status"},{title:"Type",dataIndex:"type",key:"type"},{title:"InboundName",dataIndex:"inboundName",key:"inboundName"},{title:"ParserName",dataIndex:"parserName",key:"parserName"},{title:"KeyMapperName",dataIndex:"keyMapperName",key:"keyMapperName"},{title:"FormatterName",dataIndex:"formatterName",key:"formatterName"},{title:"OutboundName",dataIndex:"outboundName",key:"outboundName"},{title:"Action",key:"action",render:function(a,s){return(0,t.jsxs)(Q.Z,{size:"middle",children:[(0,t.jsx)(g.Z,{type:"primary",onClick:function(){w.ZP.success("Wait for the implementation !")},children:"View"}),(0,t.jsx)(b.Z,{title:"Are you sure to start this flow?",onConfirm:function(){return k(s,"start")},onCancel:L,okText:"Yes",cancelText:"No",children:(0,t.jsx)(g.Z,{type:"primary",children:"start"})}),(0,t.jsx)(b.Z,{title:"Are you sure to pause this flow?",onConfirm:function(){return k(s,"pause")},onCancel:L,okText:"Yes",cancelText:"No",children:(0,t.jsx)(g.Z,{type:"primary",children:"pause"})}),(0,t.jsx)(b.Z,{title:"Are you sure to stop this flow?",onConfirm:function(){return k(s,"stop")},onCancel:L,okText:"Yes",cancelText:"No",children:(0,t.jsx)(g.Z,{type:"primary",children:"stop"})}),(0,t.jsx)(g.Z,{type:"primary",onClick:function(){w.ZP.success("Wait for the implementation !")},children:"Test"})]})}}],ge=function(){var a=i.Z.useForm(),s=m()(a,1),e=s[0],l=(0,p.useState)([]),y=m()(l,2),O=y[0],Z=y[1],$=(0,p.useState)(!1),S=m()($,2),E=S[0],F=S[1];(0,p.useEffect)(function(){c.getList().then(function(x){Z(x.data)})},[]);var G=function(N){c.getList(N).then(function(C){Z(C.data)})},K=function(N){N&&c.getList().then(function(C){Z(C.data)}),F(!1)};return(0,t.jsxs)(H._zJ,{children:[(0,t.jsxs)(q.Z,{style:{borderRadius:8},bodyStyle:{backgroundImage:"radial-gradient(circle at 97% 10%, #EBF2FF 0%, #F5F8FF 28%, #EBF1FF 124%)"},children:[(0,t.jsx)("div",{children:(0,t.jsx)(i.Z,{form:e,name:"advanced_search",className:"ant-advanced-search-form",onFinish:G,children:(0,t.jsxs)(U.Z,{gutter:24,children:[(0,t.jsx)(T.Z,{children:(0,t.jsx)(i.Z.Item,{name:"name",label:"Name",children:(0,t.jsx)(Y.Z,{})})}),(0,t.jsx)(T.Z,{children:(0,t.jsx)(i.Z.Item,{name:"status",label:"Status",children:(0,t.jsx)(v.Z,{options:[{label:"New",value:"New"},{label:"Running",value:"Running"},{label:"Stopping",value:"Stopping"},{label:"Paused",value:"Paused"},{label:"Terimation",value:"Terimation"}],style:{width:150}})})}),(0,t.jsx)(T.Z,{children:(0,t.jsx)(i.Z.Item,{name:"type",label:"Type",children:(0,t.jsx)(v.Z,{options:[{label:"TRANSACTION_YES",value:"YES"},{label:"TRANSACTION_NO",value:"NO"}],style:{width:150}})})}),(0,t.jsxs)(T.Z,{style:{textAlign:"left"},children:[(0,t.jsx)(g.Z,{type:"primary",htmlType:"submit",children:"Search"}),(0,t.jsx)(g.Z,{style:{marginLeft:10},type:"primary",onClick:function(){e.resetFields()},children:"Clear"}),(0,t.jsx)(g.Z,{style:{marginLeft:10},type:"primary",onClick:function(){F(!0)},children:"Create New"})]})]})})}),(0,t.jsx)("div",{style:{marginTop:20},children:(0,t.jsx)(X.Z,{columns:ye,dataSource:O,pagination:!0})})]}),E&&(0,t.jsx)(he,{closeCreateModal:K})]})},ve=ge,we=ve}}]);
